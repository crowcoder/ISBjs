<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Interactive Search Builder for javascript Test Runner</title>
    <link rel="stylesheet" href="app.css" type="text/css" />
   
</head>
<body>
    <div>
        <div id="content">

        </div>
        <ul id="srchUL"></ul>
    </div>
    <button id="parseBtn" onclick="parse();">Parse</button>

    <br />
    <label for="dynLinq">Dynamic Linq:</label><br />
    <textarea id="dynLinq" class="resultdiv"></textarea><br />
    <label for="sql">SQL:</label><br />
    <textarea id="sql" class="resultdiv"></textarea><br />
    <label for="linqExpr">Postfix Expression:</label><br />
    <textarea id="linqExpr" class="resultdiv"></textarea><br />
    <label for="odata">OData:</label><br />
    <textarea id="odata" class="resultdiv"></textarea>

    <script src="app.js"></script>
    <script>
        var isb;
        window.onload = function () {

            var langmap = {
                "equal": "=",
                "notequal": " not equal ",
                "startswith": " starts with",
                "endswith": "Ends with",
                "istrue": "Is true",
                "isfalse": "Is false",
                "isnull": "Is Null",
                "isnotnull": "Is not null",
                "contains": "Contains",
                "greater": ">",
                "greatereq": ">=",
                "less": "<",
                "lesseq": "<=",
                "isin": "Is in",
                "isnotin": "Is not in",
                "defsrch": "Define Search",
                "reset": "Reset"
            }

            isb = new com.contrivedexample.isbjs.Isb({
                "langmap": langmap,
                "listClass": "isbLi",
                "listItemClass": "isbLi",
                "andOrLiClass": "isbLi",
                "propSelClass": "isbselect",
                "operSelClass": "isbselect",
                "andOrSelClass": "isbselect",
                "btnClass": "isbBtn",
                "valueInputClass": "isbinput",
                "valueInputErrClass": "errorOnInput",
                "propSelAttributes": [
                    { "attr_Name": "MyAttr1", "attrValue": "aOne" },
                    { "attr_Name": "MyAttr2", "attrValue": "aTwo" }
                ],
                "divName": "content",
                "ulName": "srchUL",
                "propSelOptAttributes": [
                    { "attr_Name": "data-toggle", "attrValue": "foo" },
                    { "attr_Name": "data-role", "attrValue": "superman" }
                ],
                "propSelOptClass": "marque spin",
                "ignoreCase" : false
            });

            isb.addFilterProperty({ "display": "OrderID", "value": "OrderID", "dataType": "number" });
            isb.addFilterProperty({ "display": "CustomerID", "value": "CustomerID", "dataType": "text" });
            isb.addFilterProperty({ "display": "EmployeeID", "value": "EmployeeID", "dataType": "number" });
            isb.addFilterProperty({ "display": "OrderDate", "value": "OrderDate", "dataType": "date", "nullable": true });
            isb.addFilterProperty({ "display": "RequiredDate", "value": "RequiredDate", "dataType": "date", "nullable": true });
            isb.addFilterProperty({ "display": "ShippedDate", "value": "ShippedDate", "dataType": "date", "nullable": true });
            isb.addFilterProperty({ "display": "ShipVia", "value": "ShipVia", "dataType": "number" });
            isb.addFilterProperty({ "display": "Freight", "value": "Freight", "dataType": "number" });
            isb.addFilterProperty({ "display": "ShipName", "value": "ShipName", "dataType": "text" });
            isb.addFilterProperty({ "display": "ShipAddress", "value": "ShipAddress", "dataType": "text" });
            isb.addFilterProperty({ "display": "ShipCity", "value": "ShipCity", "dataType": "text" });
            isb.addFilterProperty({ "display": "ShipRegion", "value": "ShipRegion", "dataType": "text" });
            isb.addFilterProperty({ "display": "ShipPostalCode", "value": "ShipPostalCode", "dataType": "text" });
            isb.addFilterProperty({ "display": "ShipCountry", "value": "ShipCountry", "dataType": "text" });
            isb.addFilterProperty({ "display": "IsTrue", "value": "IsTrue", "dataType": "bool" });
                      
            //isb.render();
        };

        function parse() {
            var linqresults = isb.parse("l2e");
            //var adoresults = isb.parse("ado");
            var sqlresults = isb.parse("sql");
            var odataresults = isb.parse("odata");
            var postfixresults = isb.parseToPostFix();

            var dynlnq = document.querySelector("#dynLinq");
            dynlnq.value = linqresults.join();
         
            var sql = document.querySelector("#sql");
            sql.value = sqlresults;

            var pstfx = document.querySelector("#linqExpr");
            pstfx.value = postfixresults;

            var odata = document.querySelector("#odata");
            odata.value = odataresults;
        }

    </script>
</body>
</html>